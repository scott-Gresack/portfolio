<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Compare Adobe Web SDK u.map objects across environments to align XDM mappings." />
  <meta name="keywords" content="Martech, Adobe Experience Platform, AEP, Tealium iQ, GTM, Data Governance, Tag Management, GA4, Analytics, Attribution" />
  <meta name="author" content="Scott Gresack" />
  <meta name="robots" content="index, follow" />
  <title>Adobe Web SDK Object Comparator</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #f5f5f5;
      margin: 0;
    }
    .notion-container {
      max-width: 900px;
      margin: 2rem auto;
      padding: 2rem;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .notion-header {
      border-bottom: 2px solid #e5e5e5;
      padding-bottom: 1rem;
      margin-bottom: 2rem;
    }
    .notion-title {
      font-size: 2.5rem;
      font-weight: bold;
      color: #007bff;
      text-align: center;
    }
    .navbar {
      background: #007bff;
      color: white;
      padding: 0.75rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 12px;
    }
    .navbar a {
      color: white;
      text-decoration: none;
      font-weight: 500;
    }
    .navbar a:hover {
      text-decoration: underline;
    }
    .notion-section {
      margin-bottom: 2rem;
    }
    .notion-section-title {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }
    .input-container {
      display: grid;
      gap: 20px;
    }
    .input-columns {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    .result-table th,
    .result-table td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: left;
    }
    .result-table th {
      background-color: #007bff;
      color: #fff;
    }
    .results-section {
      margin-top: 20px;
    }
    .fun-summary {
      background: #e9ffe9;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

<div id="app" class="notion-container">
  <!-- Navigation Header -->
  <div class="navbar">
    <a href="index.html">üè† Back to Home</a>
    <span>Adobe Web SDK Object Comparator</span>
  </div>

  <header class="notion-header">
    <h1 class="notion-title">Adobe Web SDK Object Comparator</h1>
  </header>

  <section class="notion-section">
    <p><strong>Welcome!</strong> This tool helps you compare <code>u.map</code> objects from Adobe Web SDK implementations, used in Adobe Experience Platform (AEP) to map custom data to Experience Data Model (XDM) schemas. Whether you're debugging, validating, or aligning configurations across environments (e.g., Prod vs. Stage), this comparator highlights differences and matches to ensure accurate XDM mappings.</p>
    <p><a href="https://experienceleague.adobe.com/docs/experience-platform/edge/fundamentals/xdm.html" target="_blank" class="text-blue-600 underline">Learn More about XDM and AEP</a></p>
  </section>

  <section class="notion-section">
    <h2 class="notion-section-title">üõ† How to Use This Tool</h2>
    <ol>
      <li><strong>Describe Your Comparison:</strong> Enter a label (e.g., "Prod vs. Stage") to contextualize your analysis.</li>
      <li><strong>Paste Object A:</strong> Input the first <code>u.map</code> object from one environment. The tool strips <code>u.map =</code> and semicolons automatically.</li>
      <li><strong>Paste Object B:</strong> Input the second <code>u.map</code> object from another environment.</li>
      <li><strong>Compare:</strong> Click the button to analyze differences and similarities.</li>
      <li><strong>Review Results:</strong> Scroll to see a fun summary, detailed differences, and a copy-pasteable export.</li>
    </ol>
  </section>

  <section class="notion-section">
    <h2 class="notion-section-title">üìù Paste Objects for Comparison</h2>
    <div class="input-container">
      <div>
        <label><strong>1. Describe the comparison:</strong></label>
        <input type="text" v-model="comparisonLabel" placeholder="e.g., Comparing Prod vs Stage" class="w-full px-3 py-2 border rounded-lg" />
      </div>
      <div class="input-columns">
        <div>
          <label><strong>2. Paste Object A (JSON):</strong></label>
          <textarea v-model="objectAInput" placeholder="Paste full u.map = { ... }; from environment A" class="w-full p-3 border rounded-lg"></textarea>
        </div>
        <div>
          <label><strong>3. Paste Object B (JSON):</strong></label>
          <textarea v-model="objectBInput" placeholder="Paste full u.map = { ... }; from environment B" class="w-full p-3 border rounded-lg"></textarea>
        </div>
      </div>
    </div>
    <button @click="compare" class="mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Compare</button>
  </section>

  <section v-if="compared" class="results-section">
    <div class="fun-summary">
      <h2>üéâ Quick Comparison Snapshot</h2>
      <p><strong>Total Differences:</strong> {{ totalDifferences }}</p>
      <p><strong>Similarities:</strong> {{ matchingValues.length }}</p>
      <p>{{ summaryMessage }}</p>
    </div>
    <table class="result-table w-full">
      <thead>
        <tr>
          <th>Key</th>
          <th>Value in A</th>
          <th>Value in B</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="key in allKeys" :key="key">
          <td>{{ key }}</td>
          <td>{{ objectA[key] ?? '‚Äî' }}</td>
          <td>{{ objectB[key] ?? '‚Äî' }}</td>
        </tr>
      </tbody>
    </table>
  </section>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue@3"></script>
<script>
const { createApp } = Vue;

createApp({
  data() {
    return {
      comparisonLabel: '',
      objectAInput: '',
      objectBInput: '',
      errorMessage: '',
      compared: false,
      objectA: {},
      objectB: {},
      onlyInA: [],
      onlyInB: [],
      differingValues: [],
      matchingValues: [],
      allKeys: []
    };
  },
  computed: {
    totalDifferences() {
      return this.onlyInA.length + this.onlyInB.length + this.differingValues.length;
    },
    summaryMessage() {
      if (!this.compared) return '';
      if (this.totalDifferences === 0) return "üéâ Perfect match! Both u.map objects are identical.";
      return "‚ö†Ô∏è Differences detected. Review the details to resolve mismatches.";
    }
  },
  methods: {
    cleanAndParse(input, type) {
      if (!input.trim()) throw new Error(`${type} is empty. Please provide valid JSON.`);
      const match = input.match(/\{[\s\S]*\}/);
      if (!match) throw new Error(`Invalid JSON format for ${type}. Ensure it contains a valid object.`);
      try {
        return JSON.parse(match[0]);
      } catch {
        throw new Error(`Failed to parse JSON for ${type}. Please check the syntax.`);
      }
    },
    compare() {
      try {
        this.compared = false;
        this.objectA = this.cleanAndParse(this.objectAInput, 'Object A');
        this.objectB = this.cleanAndParse(this.objectBInput, 'Object B');
        this.allKeys = [...new Set([...Object.keys(this.objectA), ...Object.keys(this.objectB)])];
        this.onlyInA = this.allKeys.filter(key => !(key in this.objectB));
        this.onlyInB = this.allKeys.filter(key => !(key in this.objectA));
        this.differingValues = this.allKeys.filter(key => this.objectA[key] !== this.objectB[key] && key in this.objectA && key in this.objectB);
        this.matchingValues = this.allKeys.filter(key => this.objectA[key] === this.objectB[key]);
        this.compared = true;
      } catch (err) {
        this.errorMessage = err.message;
      }
    }
  }
}).mount('#app');
</script>

</body>
</html>
<div class="navbar">
  <a href="https://scott-gresack.github.io/portfolio/" target="_blank" class="text-white font-bold text-lg flex items-center">
    <span class="mr-2">üîô</span> Back to Portfolio
  </a>
  <span class="text-white text-lg font-semibold">Adobe Web SDK Object Comparator</span>
</div>

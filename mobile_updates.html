<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2563eb">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="apple-touch-icon" href="https://scott-gresack.github.io/portfolio/icons/icon-192x192.png">

  <meta name="description" content="Interactive tool to build and simulate Adobe Mobile SDK payloads with real-time validation. Supports Swift, Kotlin, Edge.sendEvent, and XDM identity mapping.">
  <meta name="keywords" content="Mobile Tag Spec, Adobe Mobile SDK, Edge.sendEvent, trackAction, trackState, XDM, Swift, Kotlin, AEP, CDP, Identity Resolution, Scott Gresack">
  <meta name="author" content="Scott Gresack">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://scott-gresack.github.io/portfolio/mobile_updates">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://scott-gresack.github.io/portfolio/mobile_updates">
  <meta property="og:title" content="Mobile Tag Spec Builder | Scott Gresack">
  <meta property="og:description" content="Generate Adobe Mobile SDK payloads with Swift, Kotlin, and React Native code snippets for Edge events and XDM validation.">
  <meta property="og:image" content="https://scott-gresack.github.io/portfolio/assets/preview-image.png">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Mobile Tag Spec Builder | Scott Gresack">
  <meta name="twitter:description" content="Interactive tool for creating and validating mobile analytics events with Adobe AEP SDK.">
  <meta name="twitter:image" content="https://scott-gresack.github.io/portfolio/assets/preview-image.png">

  <!-- Schema.org -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Mobile Tag Spec Builder",
    "applicationCategory": "DeveloperTool",
    "operatingSystem": "Web",
    "url": "https://scott-gresack.github.io/portfolio/mobile_updates",
    "author": {
      "@type": "Person",
      "name": "Scott Gresack",
      "url": "https://scott-gresack.github.io/portfolio/",
      "sameAs": ["https://www.linkedin.com/in/scottgresack/"]
    }
  }
  </script>

  <!-- Fonts and Styles -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <style>
    html {
      scroll-behavior: smooth;
    }
    body {
      font-family: 'Inter', sans-serif;
      background: #f9fafb;
      margin: 0;
      color: #1f2937;
    }
    .container {
      @apply max-w-7xl mx-auto px-4;
    }
    .section-title {
      @apply text-3xl font-semibold text-gray-900 mb-6;
    }
    .text-body {
      @apply text-base text-gray-600 leading-7;
    }
    .nav-link {
      @apply px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600 hover:border-b-2 hover:border-blue-600 transition;
    }
    .nav-link.active {
      @apply text-blue-600 border-b-2 border-blue-600;
    }
    .dropdown:hover .dropdown-menu {
      @apply block;
    }
    .cta-button {
      @apply inline-block bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition text-sm font-medium;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fadeInUp {
      animation: fadeInUp 0.6s ease-out forwards;
    }
  </style>

  <!-- Analytics -->
  <script defer src="https://www.googletagmanager.com/gtag/js?id=G-Y8617TLMYK"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-Y8617TLMYK', { anonymize_ip: true });
  </script>
  <script defer>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register identify".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1}(document,window.posthog||[]);
    posthog.init('phc_poY0XlVu6WBmOsIKW4OwRT60oDXKjJrMhPz1tqhvK6U', {
      api_host: 'https://us.i.posthog.com',
      capture_pageview: false
    });
    posthog.capture('pageview', { url: window.location.href });
  </script>
  <script defer>
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "pmp4efispy");
  </script>

  <title>Mobile Tag Spec Builder | Scott Gresack</title>
</head>
<body>
  <div id="app" class="min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-white shadow sticky top-0 z-50">
      <nav class="container flex justify-between items-center py-4">
        <div class="text-xl font-semibold text-gray-900">Scott Gresack</div>
        <div class="hidden md:flex items-center space-x-6 text-sm font-medium">
          <a href="https://scott-gresack.github.io/portfolio/#about" class="nav-link">About</a>
          <a href="https://scott-gresack.github.io/portfolio/#tools" class="nav-link">Tools</a>
          <a href="https://scott-gresack.github.io/portfolio/#contact" class="nav-link text-blue-600">Contact</a>
          <div class="relative dropdown">
            <button class="nav-link flex items-center">Tools â–¼</button>
            <div class="dropdown-menu hidden absolute mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50">
              <a href="https://scott-gresack.github.io/portfolio/tool2.html?utm_source=portfolio&utm_medium=nav&utm_campaign=tools" class="block px-4 py-2 hover:bg-gray-100 text-sm">Alloy Inspector</a>
              <a href="https://scott-gresack.github.io/portfolio/tag_generator.html?utm_source=portfolio&utm_medium=nav&utm_campaign=tools" class="block px-4 py-2 hover:bg-gray-100 text-sm">Tag Spec Generator</a>
              <a href="https://scott-gresack.github.io/portfolio/xdm_comparator?utm_source=portfolio&utm_medium=nav&utm_campaign=tools" class="block px-4 py-2 hover:bg-gray-100 text-sm">XDM Comparator</a>
              <a href="https://scott-gresack.github.io/portfolio/mobile_updates?utm_source=portfolio&utm_medium=nav&utm_campaign=tools" class="block px-4 py-2 hover:bg-gray-100 text-sm">Mobile Tag Builder</a>
            </div>
          </div>
        </div>
        <button class="md:hidden text-blue-600 focus:outline-none" aria-label="Toggle navigation" onclick="document.getElementById('mobile-nav').classList.toggle('hidden')">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
        </button>
      </nav>
      <div id="mobile-nav" class="hidden md:hidden bg-white border-t shadow-md">
        <a href="https://scott-gresack.github.io/portfolio/#about" class="block px-4 py-2 text-sm">About</a>
        <a href="https://scott-gresack.github.io/portfolio/#tools" class="block px-4 py-2 text-sm">Tools</a>
        <a href="https://scott-gresack.github.io/portfolio/#contact" class="block px-4 py-2 text-sm text-blue-600">Contact</a>
        <a href="https://scott-gresack.github.io/portfolio/tool2.html?utm_source=portfolio&utm_medium=nav&utm_campaign=tools" class="block px-4 py-2 text-sm">Alloy Inspector</a>
        <a href="https://scott-gresack.github.io/portfolio/tag_generator.html?utm_source=portfolio&utm_medium=nav&utm_campaign=tools" class="block px-4 py-2 text-sm">Tag Spec Generator</a>
        <a href="https://scott-gresack.github.io/portfolio/xdm_comparator?utm_source=portfolio&utm_medium=nav&utm_campaign=tools" class="block px-4 py-2 text-sm">XDM Comparator</a>
        <a href="https://scott-gresack.github.io/portfolio/mobile_updates?utm_source=portfolio&utm_medium=nav&utm_campaign=tools" class="block px-4 py-2 text-sm">Mobile Tag Builder</a>
      </div>
    </header>

    <main class="flex-grow container py-12">
      <section class="bg-white rounded-lg shadow-sm border border-gray-200 animate-fadeInUp">
        <div class="p-8">
          <h1 class="section-title flex items-center gap-2">ðŸ“± Mobile Tag Spec Builder</h1>
          <p class="text-body mb-6">Build and validate Adobe Mobile SDK payloads in real-time. Supports <code class="bg-gray-100 px-1 rounded">trackAction</code>, <code class="bg-gray-100 px-1 rounded">trackState</code>, and <code class="bg-gray-100 px-1 rounded">Edge.sendEvent</code> with XDM identity mapping for Swift, Kotlin, and React Native.</p>
          <div class="bg-blue-50 border border-blue-100 rounded-lg p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">How to Use</h2>
            <ul class="text-body list-disc pl-6 space-y-2">
              <li>Select tracking type: <code class="bg-blue-100 px-1 rounded">trackAction</code>, <code class="bg-blue-100 px-1 rounded">trackState</code>, or <code class="bg-blue-100 px-1 rounded">Edge.sendEvent</code>.</li>
              <li>Add key-value pairs for event context (e.g., screen name, feature flags).</li>
              <li>Configure XDM identityMap for user stitching (e.g., email, ECID).</li>
              <li>Preview payloads and copy code snippets for Swift, Kotlin, or React Native.</li>
              <li>Use session storage and PostHog logs for QA and validation.</li>
            </ul>
          </div>
          <div id="root"></div>
          <noscript class="text-center text-red-600 text-sm mt-4">JavaScript is required to use this tool.</noscript>
        </div>
      </section>
    </main>

    <footer class="bg-gray-800 text-white py-6">
      <div class="container text-center text-sm">
        <p>Â© 2025 Scott Gresack. All rights reserved.</p>
        <p class="mt-2">Built with privacy, performance, and open-source principles.</p>
        <div class="mt-4 flex justify-center space-x-4">
          <a href="mailto:gresack.scott@gmail.com" class="text-blue-200 hover:underline">Email</a>
          <a href="https://www.linkedin.com/in/scottgresack/" class="text-blue-200 hover:underline" target="_blank">LinkedIn</a>
          <a href="https://github.com/scott-gresack" class="text-blue-200 hover:underline" target="_blank">GitHub</a>
        </div>
      </div>
    </footer>
  </div>

  <script>
    const { createApp, ref, computed, onMounted, watch } = Vue;

    createApp({
      setup() {
        const eventType = ref('trackAction');
        const keyValues = ref([{ key: '', value: '' }]);
        const overrideDatastream = ref(false);
        const datastreamId = ref('');
        const sendIdentityMap = ref(false);
        const identityNamespace = ref('email');
        const identityId = ref('user@example.com');
        const apiStyle = ref('bridge');
        const copied = ref('');

        const addKeyValue = () => keyValues.value.push({ key: '', value: '' });

        const jsonPayload = computed(() => {
          const base = {};
          keyValues.value.forEach(({ key, value }) => {
            if (key) base[key] = value;
          });
          if (sendIdentityMap.value && identityNamespace.value && identityId.value) {
            base["xdm"] = base["xdm"] || {};
            base["xdm"]["identityMap"] = {
              [identityNamespace.value]: [{ id: identityId.value, authenticatedState: "authenticated", primary: true }]
            };
          }
          return base;
        });

        const swiftCode = computed(() => {
          const payload = JSON.stringify(jsonPayload.value, null, 2);
          return apiStyle.value === 'bridge'
            ? `AEPEdgeBridge.sendEvent(with: ${payload})`
            : `ACPExtension.${eventType.value}(withData: ${payload})`;
        });

        const kotlinCode = computed(() => {
          return apiStyle.value === 'bridge'
            ? `AEPEdgeBridge.sendEvent(mapOf(${Object.entries(jsonPayload.value).map(([k, v]) => `"${k}" to "${v}"`).join(',\n  ')}))`
            : `MobileCore.${eventType.value}(mapOf(${Object.entries(jsonPayload.value).map(([k, v]) => `"${k}" to "${v}"`).join(',\n  ')}))`;
        });

        const reactNativeCode = computed(() => {
          const payload = JSON.stringify(jsonPayload.value, null, 2);
          return apiStyle.value === 'bridge'
            ? `AEPEdgeBridge.sendEvent(${payload});`
            : `ACPExtension.${eventType.value}(${payload});`;
        });

        const overridesCode = computed(() => {
          const parts = [];
          if (overrideDatastream.value && datastreamId.value) {
            parts.push(`datastreamId: "${datastreamId.value}"`);
          }
          if (sendIdentityMap.value && identityNamespace.value && identityId.value) {
            parts.push(`identityMap: { "${identityNamespace.value}": [{ id: "${identityId.value}", authenticatedState: "ambiguous", primary: true }] }`);
          }
          return parts.length ? `{ ${parts.join(', ')} }` : 'None';
        });

        const copyToClipboard = (content, label) => {
          navigator.clipboard.writeText(content).then(() => {
            copied.value = `âœ… Copied ${label}`;
            setTimeout(() => copied.value = '', 2000);
          });
        };

        onMounted(() => {
          const saved = localStorage.getItem('mobilePayload');
          if (saved) keyValues.value = JSON.parse(saved);
          posthog.capture('tool_opened', { tool: 'mobile_tag_builder' });
        });

        watch(jsonPayload, () => {
          localStorage.setItem('mobilePayload', JSON.stringify(keyValues.value));
        });

        const showHelpModal = ref(false);
        const helpSection = ref('');
        const openHelp = (section) => {
          helpSection.value = section;
          showHelpModal.value = true;
        };
        const helpContent = computed(() => {
          switch (helpSection.value) {
            case 'eventType': return {
              title: 'Event Type',
              guide: `Choose the tracking method. "trackAction" and "trackState" are standard mobile analytics events. Use "Edge.sendEvent" for XDM-based calls to Adobe Edge Network.`,
              sample: eventType.value === 'trackAction'
                ? { code: `AEPEdgeBridge.trackAction("add_to_cart", data: { "productId": "123" })`, payload: `{ "productId": "123" }` }
                : eventType.value === 'trackState'
                ? { code: `AEPEdgeBridge.trackState("Product Detail", data: { "screen": "detail" })`, payload: `{ "screen": "detail" }` }
                : { code: `AEPEdgeBridge.sendEvent(with: { "xdm": { "eventType": "commerce.purchases" } })`, payload: `{ "xdm": { "eventType": "commerce.purchases" } }` }
            };
            case 'apiStyle': return {
              title: 'SDK API Style',
              guide: `Select the SDK integration method matching your app. AEPEdgeBridge is recommended for modern Swift/Kotlin apps; ACPExtension/MobileCore for legacy apps.`,
              sample: { code: `AEPEdgeBridge.sendEvent(...)` }
            };
            case 'context': return {
              title: 'Context Key-Value Pairs',
              guide: `Add keys and values for event context (e.g., screen names, feature flags). These map directly to the payload sent to Adobe.`,
              sample: { payload: `{ "screen": "Home", "featureFlag": true }` }
            };
            case 'overrides': return {
              title: 'Adobe Edge Overrides',
              guide: `Override the Datastream ID for QA/staging or include identityMap for user stitching and personalization across channels.`,
              sample: { code: `datastreamId: "my-qa-stream", identityMap: { "email": [{ id: "user@example.com" }] }` }
            };
            default: return { title: '', guide: '', sample: {} };
          }
        });

        return {
          eventType,
          keyValues,
          overrideDatastream,
          datastreamId,
          sendIdentityMap,
          identityNamespace,
          identityId,
          apiStyle,
          jsonPayload,
          addKeyValue,
          swiftCode,
          kotlinCode,
          reactNativeCode,
          overridesCode,
          copyToClipboard,
          copied,
          showHelpModal,
          helpSection,
          openHelp,
          helpContent
        };
      },
      template: `
        <div class="space-y-8">
          <div class="text-body flex items-center gap-2">
            <span class="inline-block bg-blue-100 text-blue-700 rounded-full px-2 py-0.5">?</span>
            Click a <span class="font-medium">question mark</span> for help and code samples.
          </div>
          <div>
            <label class="block font-medium text-gray-900 flex items-center gap-2">
              Event Type
              <button @click="openHelp('eventType')" title="Help for Event Type" class="rounded-full bg-blue-100 p-1 text-blue-700 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-300" aria-label="Help for Event Type">?</button>
            </label>
            <select v-model="eventType" class="mt-2 w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500 transition">
              <option value="trackAction">trackAction</option>
              <option value="trackState">trackState</option>
              <option value="sendEvent">Edge.sendEvent</option>
            </select>
            <p class="text-body text-sm mt-1">Choose the tracking method. Use <code class="bg-gray-100 px-1 rounded">Edge.sendEvent</code> for XDM-based calls.</p>
          </div>
          <div>
            <label class="block font-medium text-gray-900 flex items-center gap-2">
              SDK API Style
              <button @click="openHelp('apiStyle')" title="Help for SDK API Style" class="rounded-full bg-blue-100 p-1 text-blue-700 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-300" aria-label="Help for SDK API Style">?</button>
            </label>
            <select v-model="apiStyle" class="mt-2 w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500 transition">
              <option value="bridge">AEPEdgeBridge (Modern)</option>
              <option value="core">ACPExtension / MobileCore</option>
              <option value="legacy" disabled>Legacy Objective-C (Coming Soon)</option>
            </select>
            <p class="text-body text-sm mt-1">Select the SDK method matching your app's integration.</p>
          </div>
          <div>
            <label class="block font-medium text-gray-900 flex items-center gap-2">
              Context Key-Value Pairs
              <button @click="openHelp('context')" title="Help for Context Key-Value Pairs" class="rounded-full bg-blue-100 p-1 text-blue-700 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-300" aria-label="Help for Context Key-Value Pairs">?</button>
            </label>
            <p class="text-body text-sm mt-1">Add event context data (e.g., screen names, flags) for the payload.</p>
            <div v-for="(pair, index) in keyValues" :key="index" class="flex space-x-2 mt-2">
              <input v-model="pair.key" class="border border-gray-300 rounded-md p-2 w-1/2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="Key" />
              <input v-model="pair.value" class="border border-gray-300 rounded-md p-2 w-1/2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="Value" />
            </div>
            <button @click="addKeyValue" class="mt-2 text-blue-600 hover:underline text-sm focus:outline-none focus:ring-2 focus:ring-blue-300">+ Add Pair</button>
          </div>
          <div class="border-t pt-6 space-y-4">
            <label class="block font-medium text-gray-900 flex items-center gap-2">
              Adobe Edge Overrides
              <button @click="openHelp('overrides')" title="Help for Edge Overrides" class="rounded-full bg-blue-100 p-1 text-blue-700 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-300" aria-label="Help for Edge Overrides">?</button>
            </label>
            <label class="flex items-center space-x-2">
              <input type="checkbox" v-model="overrideDatastream" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" />
              <span class="text-body">Override Datastream ID</span>
            </label>
            <input v-if="overrideDatastream" v-model="datastreamId" class="border border-gray-300 rounded-md p-2 w-full focus:ring-blue-500 focus:border-blue-500 transition" placeholder="Datastream ID" />
            <p v-if="overrideDatastream" class="text-body text-sm">Route events to a specific Adobe Datastream for QA or staging.</p>
            <label class="flex items-center space-x-2">
              <input type="checkbox" v-model="sendIdentityMap" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" />
              <span class="text-body">Send identityMap</span>
            </label>
            <div v-if="sendIdentityMap" class="space-y-2">
              <input v-model="identityNamespace" class="border border-gray-300 rounded-md p-2 w-full focus:ring-blue-500 focus:border-blue-500 transition" placeholder="Namespace (e.g., email, ECID)" />
              <input v-model="identityId" class="border border-gray-300 rounded-md p-2 w-full focus:ring-blue-500 focus:border-blue-500 transition" placeholder="ID (e.g., user@example.com)" />
              <p class="text-body text-sm">Enable identity stitching for personalization across channels.</p>
            </div>
          </div>
          <div class="bg-gray-50 border border-gray-200 rounded-lg p-6">
            <label class="block font-medium text-gray-900 mb-2">Generated Payload</label>
            <pre class="text-sm text-gray-800 bg-white p-4 rounded-md border"><code>{{ JSON.stringify(jsonPayload, null, 2) }}</code></pre>
            <p class="text-body text-sm mt-2">Overrides: {{ overridesCode }}</p>
          </div>
          <div class="grid md:grid-cols-2 gap-6">
            <div class="bg-white border border-gray-200 rounded-lg p-6">
              <div class="flex justify-between items-center mb-2">
                <h3 class="font-medium text-gray-900">Swift (iOS)</h3>
                <button @click="copyToClipboard(swiftCode, 'Swift')" class="text-blue-600 text-sm hover:underline focus:outline-none focus:ring-2 focus:ring-blue-300">Copy</button>
              </div>
              <pre class="text-sm text-gray-800 bg-gray-50 p-4 rounded-md border"><code>{{ swiftCode }}</code></pre>
            </div>
            <div class="bg-white border border-gray-200 rounded-lg p-6">
              <div class="flex justify-between items-center mb-2">
                <h3 class="font-medium text-gray-900">Kotlin / Java (Android)</h3>
                <button @click="copyToClipboard(kotlinCode, 'Kotlin')" class="text-blue-600 text-sm hover:underline focus:outline-none focus:ring-2 focus:ring-blue-300">Copy</button>
              </div>
              <pre class="text-sm text-gray-800 bg-gray-50 p-4 rounded-md border"><code>{{ kotlinCode }}</code></pre>
            </div>
            <div class="bg-white border border-gray-200 rounded-lg p-6 md:col-span-2">
              <div class="flex justify-between items-center mb-2">
                <h3 class="font-medium text-gray-900">React Native</h3>
                <button @click="copyToClipboard(reactNativeCode, 'React Native')" class="text-blue-600 text-sm hover:underline focus:outline-none focus:ring-2 focus:ring-blue-300">Copy</button>
              </div>
              <pre class="text-sm text-gray-800 bg-gray-50 p-4 rounded-md border"><code>{{ reactNativeCode }}</code></pre>
            </div>
          </div>
          <p v-if="copied" class="text-green-600 text-sm">{{ copied }}</p>
          <div v-if="showHelpModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-lg p-6 max-w-md w-full border border-gray-200">
              <button @click="showHelpModal = false" class="absolute top-4 right-4 text-gray-500 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300" aria-label="Close modal">Ã—</button>
              <h2 class="text-xl font-medium text-gray-900 mb-4">{{ helpContent.title }}</h2>
              <p class="text-body mb-4">{{ helpContent.guide }}</p>
              <div v-if="helpContent.sample && helpContent.sample.code" class="mb-4">
                <p class="text-sm text-gray-600 mb-2">Code Sample</p>
                <pre class="bg-gray-50 p-4 rounded-md text-sm border"><code>{{ helpContent.sample.code }}</code></pre>
              </div>
              <div v-if="helpContent.sample && helpContent.sample.payload">
                <p class="text-sm text-gray-600 mb-2">Sample Payload</p>
                <pre class="bg-gray-50 p-4 rounded-md text-sm border"><code>{{ helpContent.sample.payload }}</code></pre>
              </div>
              <div v-if="helpSection === 'eventType'" class="text-sm text-blue-600">
                <a href="https://medium.com/@ctobin_60705/aep-validation-plugins-with-public-api-support-239637d3b63a" target="_blank" class="underline hover:text-blue-700">Read about validation plugins</a>
              </div>
            </div>
          </div>
        </div>
      `
    }).mount('#root');
  </script>

  <script>
    (function () {
      function getGASessionId() {
        const gaCookie = document.cookie.split('; ').find(row => row.startsWith('_ga='));
        if (!gaCookie) return null;
        const parts = gaCookie.split('.');
        if (parts.length < 4) return null;
        return `${parts[2]}.${parts[3]}`;
      }

      const sessionId = getGASessionId();
      if (sessionId && window.posthog) {
        posthog.register({ ga_session_id: sessionId });
        posthog.capture('pageview_with_ga_session', { ga_session_id: sessionId, tool: 'mobile_tag_builder' });
      }
    })();
  </script>
</body>
</html>

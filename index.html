<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scott Gresack | Martech Engineer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/vue@3"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #5b2c6f, #2874a6);
      color: #fff;
    }
    .code {
      background: #1c2833;
      color: #f7dc6f;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      font-family: monospace;
    }
    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- Header & Navigation -->
    <header class="fixed top-0 left-0 right-0 bg-white text-gray-900 shadow z-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16 items-center">
          <h1 class="text-lg font-semibold">Scott Gresack</h1>
          <nav class="space-x-4">
            <button @click="navigate('about')" 
                    :class="{ 'font-bold underline': activeView === 'about' }" 
                    class="text-sm hover:text-blue-600">About</button>
            <button @click="navigate('mobile')" 
                    :class="{ 'font-bold underline': activeView === 'mobile' }" 
                    class="text-sm hover:text-blue-600">Mobile Spec</button>
            <button @click="navigate('web')" 
                    :class="{ 'font-bold underline': activeView === 'web' }" 
                    class="text-sm hover:text-blue-600">Web Spec</button>
            <button @click="navigate('xdm')" 
                    :class="{ 'font-bold underline': activeView === 'xdm' }" 
                    class="text-sm hover:text-blue-600">XDM Comparison</button>
          </nav>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="pt-20 max-w-5xl mx-auto px-4 space-y-8">
      <!-- About Section -->
      <section v-show="activeView === 'about'" class="p-6 bg-gray-100 text-gray-800 rounded-lg">
        <h2 class="text-2xl font-bold mb-4">About Scott Gresack</h2>
        <p>Martech Engineer with deep experience across Adobe Experience Platform, Tealium iQ, GTM, and scalable data collection strategies for web and mobile applications.</p>
      </section>

      <!-- Mobile Tag Spec Generator -->
      <section v-show="activeView === 'mobile'" class="bg-gray-900 text-white p-6 rounded-xl shadow-xl">
        <h2 class="text-2xl font-bold text-cyan-300 mb-4 text-center">Mobile Tag Spec Generator</h2>
        <div class="flex justify-center flex-wrap gap-4 mb-6">
          <button @click="setActionType('trackAction')" :class="actionTypeClass('trackAction')" class="px-4 py-2 rounded text-white transition">Track Action</button>
          <button @click="setActionType('trackState')" :class="actionTypeClass('trackState')" class="px-4 py-2 rounded text-white transition">Track State</button>
          <button @click="setActionType('sendXdm')" :class="actionTypeClass('sendXdm')" class="px-4 py-2 rounded text-white transition">Send XDM</button>
        </div>
        <div class="space-y-2">
          <div v-for="(pair,index) in keyValuePairs" :key="index" class="flex flex-col sm:flex-row gap-2 items-center">
            <input v-model="pair.key" placeholder="Key" class="w-full sm:w-1/2 px-3 py-2 rounded bg-gray-700 text-white border border-blue-400" />
            <input v-model="pair.value" placeholder="Value" class="w-full sm:w-1/2 px-3 py-2 rounded bg-gray-700 text-white border border-blue-400" />
            <button @click="removePair(index)" class="bg-red-600 px-3 py-2 rounded text-white">Remove</button>
          </div>
        </div>
        <button @click="addPair" class="bg-green-600 px-4 py-2 rounded text-white mt-4">+ Add Pair</button>
        <div class="mt-8">
          <h3 class="text-lg font-semibold text-cyan-400 mb-2">Swift Code</h3>
          <pre class="code">{{ swiftCode }}</pre>
          <button @click="copyToClipboard(swiftCode,'Swift')" class="bg-yellow-500 px-4 py-2 rounded mt-2">Copy Swift</button>
        </div>
        <div class="mt-8">
          <h3 class="text-lg font-semibold text-cyan-400 mb-2">Android Code</h3>
          <pre class="code">{{ androidCode }}</pre>
          <button @click="copyToClipboard(androidCode,'Android')" class="bg-yellow-500 px-4 py-2 rounded mt-2">Copy Android</button>
        </div>
      </section>

      <!-- Web Tag Spec Generator -->
      <section v-show="activeView === 'web'" class="bg-gray-900 text-white p-6 rounded-xl shadow-xl">
        <h2 class="text-2xl font-bold text-cyan-300 mb-4 text-center">Web Tag Spec Generator</h2>
        <div class="space-y-2">
          <div v-for="(pair,index) in keyValuePairs" :key="index" class="flex flex-col sm:flex-row gap-2 items-center">
            <input v-model="pair.key" placeholder="Key" class="w-full sm:w-1/2 px-3 py-2 rounded bg-gray-700 text-white border border-blue-400" />
            <input v-model="pair.value" placeholder="Value" class="w-full sm:w-1/2 px-3 py-2 rounded bg-gray-700 text-white border border-blue-400" />
            <button @click="removePair(index)" class="bg-red-600 px-3 py-2 rounded text-white">Remove</button>
          </div>
        </div>
        <button @click="addPair" class="bg-green-600 px-4 py-2 rounded text-white mt-4">+ Add Pair</button>
        <div class="mt-8">
          <h3 class="text-lg font-semibold text-cyan-400 mb-2">Sample Tag Payload</h3>
          <pre class="code">{{ JSON.stringify(buildPayload(), null, 2) }}</pre>
          <button @click="copyToClipboard(JSON.stringify(buildPayload(), null, 2),'WebPayload')" class="bg-yellow-500 px-4 py-2 rounded mt-2">Copy Payload</button>
        </div>
      </section>

      <!-- XDM Schema Comparator -->
      <section v-show="activeView === 'xdm'" class="p-6 bg-gray-100 text-gray-800 rounded-lg">
        <h2 class="text-2xl text-center font-bold my-4">XDM Schema Comparator</h2>
        <div class="max-w-4xl mx-auto bg-white text-black p-4 rounded shadow">
          <div class="mb-4">
            <label for="schemaA" class="block font-semibold">Schema A:</label>
            <textarea id="schemaA" v-model="objectAInput" rows="8" class="w-full p-2 border rounded font-mono"></textarea>
          </div>
          <div class="mb-4">
            <label for="schemaB" class="block font-semibold">Schema B:</label>
            <textarea id="schemaB" v-model="objectBInput" rows="8" class="w-full p-2 border rounded font-mono"></textarea>
          </div>
          <button @click="compare" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">Compare</button>
          <div v-if="errorMessage" class="text-red-500 mt-4">{{ errorMessage }}</div>
          <div v-if="compared" class="mt-6">
            <h3 class="text-xl font-bold mb-2">Comparison Summary</h3>
            <p>{{ summaryMessage }}</p>
            <div class="my-4">
              <button @click="copyResults" class="bg-yellow-500 text-black px-3 py-1 rounded mr-2">Copy Results</button>
            </div>
            <pre ref="outputText" class="code text-sm">
Only in A:
{{ onlyInA.join('\n') || 'None' }}

Only in B:
{{ onlyInB.join('\n') || 'None' }}

Differences:
{{ differingValues.length ? differingValues.map(key => `- ${key}\n  A: ${objectA[key]}\n  B: ${objectB[key]}`).join('\n\n') : 'None' }}

Matching:
{{ matchingValues.join('\n') || 'None' }}
            </pre>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {
          activeView: 'about',
          objectAInput: '',
          objectBInput: '',
          objectA: {},
          objectB: {},
          onlyInA: [],
          onlyInB: [],
          differingValues: [],
          matchingValues: [],
          compared: false,
          errorMessage: '',
          keyValuePairs: [],
          actionType: '',
        };
      },
      computed: {
        swiftCode() {
          if (this.actionType === 'trackAction') {
            return `ACPCore.trackAction("${this.keyValuePairs.map(kvp => `${kvp.key}: ${kvp.value}`).join(', ')}")`;
          }
          if (this.actionType === 'trackState') {
            return `ACPCore.trackState("${this.keyValuePairs.map(kvp => `${kvp.key}: ${kvp.value}`).join(', ')}")`;
          }
          return '';
        },
        androidCode() {
          return `MobileSDK.trackEvent("${this.keyValuePairs.map(kvp => `${kvp.key}: ${kvp.value}`).join(', ')}")`;
        },
      },
      methods: {
        buildPayload() {
          return this.keyValuePairs.reduce((acc, pair) => {
            acc[pair.key] = pair.value;
            return acc;
          }, {});
        },
        setActionType(type) {
          this.actionType = type;
        },
        copyToClipboard(text, label) {
          navigator.clipboard.writeText(text)
            .then(() => alert(`${label} Code Copied!`))
            .catch(() => alert('Copy Failed.'));
        },
        addPair() {
          this.keyValuePairs.push({ key: '', value: '' });
        },
        removePair(index) {
          this.keyValuePairs.splice(index, 1);
        },
        compare() {
          try {
            this.errorMessage = '';
            this.objectA = JSON.parse(this.objectAInput);
            this.objectB = JSON.parse(this.objectBInput);
            const keysA = Object.keys(this.objectA);
            const keysB = Object.keys(this.objectB);
            const allKeys = [...new Set([...keysA, ...keysB])];
            this.onlyInA = allKeys.filter(k => !(k in this.objectB));
            this.onlyInB = allKeys.filter(k => !(k in this.objectA));
            this.differingValues = allKeys.filter(k => this.objectA[k] !== this.objectB[k] && (k in this.objectA) && (k in this.objectB));
            this.matchingValues = allKeys.filter(k => this.objectA[k] === this.objectB[k]);
            this.compared = true;
          } catch (e) {
            this.errorMessage = e.message;
            this.compared = false;
          }
        },
        navigate(view) {
          this.activeView = view;
        },
        copyResults() {
          navigator.clipboard.writeText(this.$refs.outputText.textContent)
            .then(() => alert('Comparison Results Copied!'))
            .catch(() => alert('Copy Failed.'));
        },
      },
    }).mount('#app');
  </script>
</body>
</html>
